<html>
<head>
	<%- include('common/imports.ejs') %>
	<script src="/static/scripts/profile.js" type="text/javascript"></script>
	<link rel="stylesheet" href="/static/styles/profile.css">
	<title>Profilo</title>
</head>
<body onload="setProfile()">
	<%- include('common/header.ejs') %>
	<div class="body-container">
		<div class="profile-container">
			<div class="profile-left">
				<div class="image-container">
					<img src="/static/images/profile.jpg" class="profileImage">
					<p><b id="profileName"><%= user.name %> <%= user.surname %></b></p>
				</div>
				<div section="account" name="section" class="section active" onclick="changeSection(this)"><i class="fa fa-user"></i>Account</div>
				<div section="security" name="section" class="section" onclick="changeSection(this)"><i class="fa fa-key"></i>Sicurezza</div>
				<div section="survey" name="section" class="section" onclick="changeSection(this)"><i class="fa fa-database"></i>Questionari</div>
			</div>
			<div class="profile-right">
				<div id="account-section">
					<h2>Account</h2>
					<p style="font-size: 12px; color: grey; margin-top: -12px"><%= user._id %></p>
					<table>
						<tr>
							<td>
								<label for="name" class="label">Nome</label><br>
								<input id="name" class="inputField" type="text" name="name" value="<%= user.name %>" />
							</td>
							<td>
								<label for="surname" class="label">Cognome</label><br>
								<input id="surname" class="inputField" type="text" name="surname" value="<%= user.surname %>" />
							</td>
						</tr>
						<tr>
							<td>
								<label for="email" class="label">Email</label><br>
								<input id="email" class="inputField" type="email" name="email" value="<%= user.email %>" />
							</td>
							<td>
								<label for="organization" class="label">Organizzazione</label><br>
								<input id="organization" class="inputField" type="text" name="organization" value="<%= user.organization %>" />
							</td>
						</tr>
						<tr>
							<td>
								<label for="province" class="label">Provincia</label><br>
								<select class="inputField" id="province">
									<option value="AG">Agrigento</option>
									<option value="AL">Alessandria</option>
									<option value="AN">Ancona</option>
									<option value="AO">Aosta</option>
									<option value="AR">Arezzo</option>
									<option value="AP">Ascoli Piceno</option>
									<option value="AT">Asti</option>
									<option value="AV">Avellino</option>
									<option value="BA">Bari</option>
									<option value="BT">Barletta-Andria-Trani</option>
									<option value="BL">Belluno</option>
									<option value="BN">Benevento</option>
									<option value="BG">Bergamo</option>
									<option value="BI">Biella</option>
									<option value="BO">Bologna</option>
									<option value="BZ">Bolzano</option>
									<option value="BS">Brescia</option>
									<option value="BR">Brindisi</option>
									<option value="CA">Cagliari</option>
									<option value="CL">Caltanissetta</option>
									<option value="CB">Campobasso</option>
									<option value="CE">Caserta</option>
									<option value="CT">Catania</option>
									<option value="CZ">Catanzaro</option>
									<option value="CH">Chieti</option>
									<option value="CO">Como</option>
									<option value="CS">Cosenza</option>
									<option value="CR">Cremona</option>
									<option value="KR">Crotone</option>
									<option value="CN">Cuneo</option>
									<option value="EN">Enna</option>
									<option value="FM">Fermo</option>
									<option value="FE">Ferrara</option>
									<option value="FI">Firenze</option>
									<option value="FG">Foggia</option>
									<option value="FC">Forl&igrave;-Cesena</option>
									<option value="FR">Frosinone</option>
									<option value="GE">Genova</option>
									<option value="GO">Gorizia</option>
									<option value="GR">Grosseto</option>
									<option value="IM">Imperia</option>
									<option value="IS">Isernia</option>
									<option value="AQ">L'aquila</option>
									<option value="SP">La spezia</option>
									<option value="LT">Latina</option>
									<option value="LE">Lecce</option>
									<option value="LC">Lecco</option>
									<option value="LI">Livorno</option>
									<option value="LO">Lodi</option>
									<option value="LU">Lucca</option>
									<option value="MC">Macerata</option>
									<option value="MN">Mantova</option>
									<option value="MS">Massa-Carrara</option>
									<option value="MT">Matera</option>
									<option value="ME">Messina</option>
									<option value="MI">Milano</option>
									<option value="MO">Modena</option>
									<option value="MB">Monza e Brianza</option>
									<option value="NA">Napoli</option>
									<option value="NO">Novara</option>
									<option value="NU">Nuoro</option>
									<option value="OR">Oristano</option>
									<option value="PD">Padova</option>
									<option value="PA">Palermo</option>
									<option value="PR">Parma</option>
									<option value="PV">Pavia</option>
									<option value="PG">Perugia</option>
									<option value="PU">Pesaro e Urbino</option>
									<option value="PE">Pescara</option>
									<option value="PC">Piacenza</option>
									<option value="PI">Pisa</option>
									<option value="PT">Pistoia</option>
									<option value="PN">Pordenone</option>
									<option value="PZ">Potenza</option>
									<option value="PO">Prato</option>
									<option value="RG">Ragusa</option>
									<option value="RA">Ravenna</option>
									<option value="RC">Reggio Calabria</option>
									<option value="RE">Reggio Emilia</option>
									<option value="RI">Rieti</option>
									<option value="RN">Rimini</option>
									<option value="RM">Roma</option>
									<option value="RO">Rovigo</option>
									<option value="SA">Salerno</option>
									<option value="SS">Sassari</option>
									<option value="SV">Savona</option>
									<option value="SI">Siena</option>
									<option value="SR">Siracusa</option>
									<option value="SO">Sondrio</option>
									<option value="SU">Sud Sardegna</option>
									<option value="TA">Taranto</option>
									<option value="TE">Teramo</option>
									<option value="TR">Terni</option>
									<option value="TO">Torino</option>
									<option value="TP">Trapani</option>
									<option value="TN">Trento</option>
									<option value="TV">Treviso</option>
									<option value="TS">Trieste</option>
									<option value="UD">Udine</option>
									<option value="VA">Varese</option>
									<option value="VE">Venezia</option>
									<option value="VB">Verbano-Cusio-Ossola</option>
									<option value="VC">Vercelli</option>
									<option value="VR">Verona</option>
									<option value="VV">Vibo valentia</option>
									<option value="VI">Vicenza</option>
									<option value="VT">Viterbo</option>
								</select>
							</td>
							<td>
								<label for="role" class="label">Ruolo</label><br>
								<p name="role" class="inputField"><%= user.role %></p>
							</td>
						</tr>
						<tr>
							<td>
								<label for="apikey" class="label"><b>APIKEY</b></label><br>
								<p class="apikey" name="apikey"><%= user.apikey %></p>
							</td>
						</tr>
					</table>					
					<div class="controls">
						<button type="button" onclick="modifyAccount()">Modifica Account</button>
						<button type="button" class="delete" onclick="deleteAccount()">Elimina Account</button>
					</div>
				</div>
				<div id="security-section">
					<h2>Sicurezza</h2>
					<table>
						<tr>
							<td>
								<label for="old_password" class="label">Vecchia Password</label><br>
								<input id="old_password" class="inputField" type="password" name="old_password"/>
							</td>
						</tr>
						<tr>
							<td>
								<label for="new_password" class="label">Nuova Password</label><br>
								<input id="new_password" class="inputField" type="password" name="new_password"/>
							</td>
							<td>
								<label for="cpassword" class="label">Conferma Nuova Password</label><br>
								<input id="cpassword" class="inputField" type="password" name="cpassword" />
							</td>
						</tr>
					</table>
					<div class="controls">
						<button type="button" onclick="modifyPassword()">Modifica Password</button>
					</div>
				</div>
				<div id="survey-section">
					<h2>Questionari</h2>
					<p>Copia l'ID del questionario e inseriscilo nell'apposita pagina (GDPR o SELF ASSESSMENT) per vederne le risposte date. <br>Si fa presente che un ID GDPR non funziona su pagina SELF ASSESSMENT e viceversa.</p>
					<div>
						<ul>
							<% for(var i=0; i < surveys.length; i++) { %>
								<li class="surveyID"><b><%= surveys[i]._id %></b> di tipo <b><%= surveys[i].type %></b> <span class="date">[<%= surveys[i].date %>]</span></li>
							<% } %>
						</ul>
					</div>
				</div>
			</div>
		</div>	
	</div>
</body>
</html>