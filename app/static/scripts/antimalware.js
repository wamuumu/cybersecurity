function getFile() {
  document.getElementById("filetoupload").click();
}

function resetRadio(radioName){
    let radios = document.getElementsByName(radioName);
    for (var i = 0; i < radios.length; i++) {
        if(radios[i].id != "file")
            radios[i].checked = false;
        else
            radios[i].checked = true;
    }
}

function readFile(file){
	if(file.url != ""){
		document.getElementById('resultsForm').submit();
		file.disabled = true;
		file.value = "";
		document.getElementById('uploadFile').innerHTML = "Analizzo il file..."
		document.getElementById('uploadFile').style.color = "#ffffff"
		document.getElementById('uploadFile').style.backgroundColor = "#0000ff"
	}
}

function resetDomain(e){
    e.preventDefault();
    var domain = document.getElementById('domain');
    if(domain.value != ""){
        e.target.disabled = true;
        document.getElementById('resultsForm').submit();
        domain.value = "";
    } else
        alert("Inserisci un dominio valido")
}

function showOption(radio){
    
    let urlContainer = document.getElementById("url-container");
    let fileContainer = document.getElementById("file-container");

    let sendButton = document.getElementById("send_url");
    sendButton.disabled = false;

    if(radio.value == "domain"){
        urlContainer.style.display = "block";
        fileContainer.style.display = "none";
        sendButton.style.display = "block";
    } else {
        urlContainer.style.display = "none";
        fileContainer.style.display = "block";
        sendButton.style.display = "none";
    }
}

function displayResults(mal, und, type){

	document.getElementsByTagName("th")[1].click(); 
	
	let total = mal + und;
	var color = '#22b573';

	if(mal != 0)
		color = '#ff1f4a';

	let banner = document.getElementById('banner');
	banner.style.color = color;

    if(type != "url")
        type = "file";

	if(mal != 0)
		banner.innerHTML = mal + " engine hanno rilevato questo " + type + " pericoloso"
	else
		banner.innerHTML = "Nessun engine ha classificato questo " + type + " come pericoloso"

    var opts = {
        angle: 0.5, // The span of the gauge arc
        lineWidth: 0.1, // The line thickness
        radiusScale: 1, // Relative radius
        pointer: {
            length: 0.6, // // Relative to gauge radius
            strokeWidth: 0.035, // The thickness
            color: '#000000' // Fill color
        },
        limitMax: false,     // If false, max value increases automatically if value > maxValue
        limitMin: false,     // If true, the min value of the gauge will be fixed
        colorStart: color,   // Colors
        colorStop: color,    // just experiment with them
        strokeColor: '#EEEEEE',  // to see which ones work best for you
        generateGradient: true,
        highDpiSupport: true,     // High resolution support
    };
    
    var target = document.getElementById('gauge'); // your canvas element
    var text = document.getElementById('gauge-value'); // your text element
    text.innerHTML = "<p style='color: " + color + "; font-size: 40px; margin: 0px'>" + mal + "</p><p style='margin: 0px; font-size: 20px; color: #9b9b9b;'>/" + total + "</p>";
    var gauge = new Donut(target).setOptions(opts); // create sexy gauge!
    gauge.maxValue = total; // set max gauge value
    gauge.setMinValue(0);  // Prefer setter over gauge.minValue = 0
    gauge.animationSpeed = 10; // set animation speed (32 is default value)
    gauge.text = mal + "/" + total;
    if(mal != 0)
    	gauge.set(mal); // set actual value
    else
    	gauge.set(total)
}